# =============================================================================
# Conda Environment Configuration
# =============================================================================
# Usage:
#   conda env create -f environment.yml
#   conda activate crypto-trading
# =============================================================================

name: crypto-trading
channels:
  - pytorch
  - conda-forge
  - defaults

dependencies:
  # Python version
  - python=3.11

  # -----------------------------------------------------------------------------
  # Core Scientific Stack
  # -----------------------------------------------------------------------------
  - numpy>=1.24
  - pandas>=2.1
  - scipy>=1.11

  # -----------------------------------------------------------------------------
  # Machine Learning - Core
  # -----------------------------------------------------------------------------
  - scikit-learn>=1.3
  - lightgbm>=4.1

  # PyTorch (CPU version - add cuda toolkit for GPU)
  - pytorch>=2.1
  - torchvision
  - torchaudio
  # Uncomment for GPU support:
  # - pytorch-cuda=12.1

  # -----------------------------------------------------------------------------
  # Database
  # -----------------------------------------------------------------------------
  - psycopg2>=2.9
  - sqlalchemy>=2.0
  - redis-py>=5.0

  # -----------------------------------------------------------------------------
  # Data Processing
  # -----------------------------------------------------------------------------
  - pyyaml>=6.0
  - python-dateutil
  - pytz

  # -----------------------------------------------------------------------------
  # Visualization
  # -----------------------------------------------------------------------------
  - matplotlib>=3.7
  - plotly>=5.17

  # -----------------------------------------------------------------------------
  # Development Tools
  # -----------------------------------------------------------------------------
  - pytest>=7.4
  - pytest-cov
  - black
  - isort
  - flake8
  - mypy

  # -----------------------------------------------------------------------------
  # Jupyter (optional, for notebooks)
  # -----------------------------------------------------------------------------
  - jupyterlab>=4.0
  - ipykernel

  # -----------------------------------------------------------------------------
  # Pip dependencies (not available in conda)
  # -----------------------------------------------------------------------------
  - pip
  - pip:
      # Exchange APIs
      - ccxt>=4.2

      # Technical Analysis
      - ta>=0.11  # Pure Python TA library (easier install than TA-Lib)
      # - pandas-ta>=0.3  # Commented out - compatibility issues, ta library sufficient

      # PyTorch Geometric (Graph Neural Networks) - Phase 4-5
      # Note: Requires special install order, added separately when needed
      # - torch-geometric>=2.4
      # - torch-scatter
      # - torch-sparse

      # Reinforcement Learning
      - stable-baselines3>=2.1
      - gymnasium>=0.29
      # - finrl>=0.3  # Optional: uncomment for FinRL framework

      # NLP / Sentiment
      - transformers>=4.35
      - tokenizers

      # Specialized ML - Phase 4-5
      # - tigramite>=5.2  # Causal discovery - add when needed
      # - learn2learn>=0.2  # Meta-learning - requires special build, add when needed

      # On-Chain Data (Phase 3)
      - dune-client>=1.7  # Dune Analytics API for MVRV, SOPR, netflows

      # Note: Reddit sentiment uses public .json endpoints (no auth required)
      # PRAW commented out - requires API approval since Nov 2025
      # - praw>=7.7

      # Monitoring
      - streamlit>=1.28

      # HTTP / Async
      - aiohttp>=3.9
      - websockets>=12.0
      - requests>=2.31
      - httpx>=0.25

      # Utilities
      - python-dotenv>=1.0
      - tqdm>=4.66
      - loguru>=0.7

      # Type hints
      - types-pyyaml
      - types-requests
      - pandas-stubs

# -----------------------------------------------------------------------------
# Notes:
# -----------------------------------------------------------------------------
# 1. TA-Lib requires separate installation of the C library:
#    - Ubuntu: sudo apt-get install libta-lib-dev
#    - macOS: brew install ta-lib
#    Then: pip install TA-Lib
#
# 2. For GPU support, replace pytorch with:
#    conda install pytorch pytorch-cuda=12.1 -c pytorch -c nvidia
#
# 3. PostgreSQL and TimescaleDB must be installed separately:
#    - See SETUP.md for instructions
#
# 4. Redis must be installed separately:
#    - Ubuntu: sudo apt-get install redis-server
#    - macOS: brew install redis
# =============================================================================
