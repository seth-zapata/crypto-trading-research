# User Workflow & System Interaction Guide

**How YOU (the human) actually use, monitor, and control this trading system.**

This document answers: "What's my day-to-day workflow?" and "How do I see what's happening?"

---

## Table of Contents

1. [Development Phase (Weeks 1-6)](#development-phase)
2. [Paper Trading Phase (Weeks 7-8)](#paper-trading-phase)
3. [Live Trading Phase (Week 9+)](#live-trading-phase)
4. [Daily Maintenance Workflow](#daily-maintenance-workflow)
5. [Jupyter Notebooks Strategy](#jupyter-notebooks-strategy)
6. [Monitoring Dashboard](#monitoring-dashboard)
7. [Manual Override & Emergency Procedures](#manual-override)

---

## Development Phase (Weeks 1-6)

### Your Workflow Each Week

#### Week 1: Data Infrastructure

**What Opus Builds:**
- Database schema
- Data ingestion scripts
- Feature engineering pipeline

**What YOU Do:**

**1. Morning: Review Yesterday's Work**
```bash
# Check commits
git log --oneline --since="yesterday"

# Check test results
pytest tests/ -v

# Inspect database
psql -d crypto_trading
```

**2. Mid-Day: Run Validation Notebooks**
```bash
jupyter lab

# Open: notebooks/01_data_validation.ipynb
# This notebook (generated by Opus) shows:
# - Sample of fetched data
# - Data quality checks (missing values, outliers)
# - Feature distributions
# - Correlation heatmaps
```

**3. Afternoon: Review & Approve**
```bash
# Run the data pipeline manually
python scripts/backfill_data.py --symbol BTC/USDT --days 1 --verbose

# Check logs
tail -f logs/data_ingestion.log

# Query results
psql -d crypto_trading -c "
  SELECT time, open, high, low, close, volume 
  FROM ohlcv 
  WHERE symbol = 'BTC/USDT' 
  ORDER BY time DESC 
  LIMIT 10;
"
```

**4. End of Day: Approve Next Phase**
```
(To Opus): "Data pipeline looks good. Proceed with Phase 2 (LightGBM baseline)."
```

---

#### Week 2: Baseline Model

**What Opus Builds:**
- LightGBM training pipeline
- Backtesting framework
- Performance metrics

**What YOU Do:**

**1. Review Training Notebook**
```bash
jupyter lab notebooks/02_lightgbm_training.ipynb

# This notebook shows:
# - Feature importance plot
# - Cross-validation results
# - Learning curves
# - Confusion matrix
# - Sample predictions
```

**2. Run Backtest Interactively**
```python
# In Jupyter or IPython
from backtesting.engine import BacktestEngine
from models.predictors.lightgbm_baseline import LightGBMPredictor

# Load model
model = LightGBMPredictor.load('models/saved/lightgbm_v1.pkl')

# Run backtest
engine = BacktestEngine(
    model=model,
    start_date='2024-01-01',
    end_date='2024-06-01',
    initial_capital=10000,
    transaction_cost=0.001
)

results = engine.run()

# Visualize
results.plot_equity_curve()
results.plot_drawdown()
results.print_summary()

# Output:
# Sharpe Ratio: 1.42
# Max Drawdown: -12.3%
# Win Rate: 52.1%
# Profit Factor: 1.67
```

**3. Investigate Performance**
```python
# Look at specific trades
trades = results.get_trades()
losing_trades = trades[trades['pnl'] < 0].sort_values('pnl')

print(losing_trades.head())
# Why did these trades lose? Were they during high volatility?
# Did features mislead the model?

# Check by market regime
results.plot_performance_by_regime()
```

**4. Decision Point: Approve or Iterate?**

**If Sharpe > 1.0 and Max DD < 20%:**
```
(To Opus): "Baseline model approved. Sharpe is 1.42, which is promising. 
Proceed with Phase 3 (on-chain data integration)."
```

**If Performance is Poor:**
```
(To Opus): "Model is overfitting - training accuracy 85% but test accuracy 48%. 
Let's investigate:
1. Show me feature importance - are we using future data accidentally?
2. Check for data leakage in the cross-validation split
3. Try simpler model (fewer features, higher regularization)"
```

---

#### Weeks 3-5: Advanced Models

**Daily Routine:**

```bash
# Morning ritual (15 minutes)
cd ~/crypto-trading-system

# 1. Check overnight training jobs
cat logs/training_$(date +%Y%m%d).log | tail -20

# 2. Review commits
git log --oneline --since="yesterday"

# 3. Check model performance dashboard
python monitoring/generate_daily_report.py

# Outputs: reports/daily_report_2024_12_03.html
# Open in browser to see:
# - Model performance comparison (LightGBM vs LSTM vs GNN)
# - Feature drift detection
# - Prediction confidence trends
# - Any errors or warnings
```

**Weekly Deep Dive (Sundays, 1-2 hours):**

```bash
jupyter lab

# Open: notebooks/03_model_comparison.ipynb
# This shows head-to-head model performance across different regimes:
# - Bull market (2023 Q1)
# - Bear market (2022 Q2-Q4)
# - Ranging market (2024 Q2)
# - High volatility (2021 May crash)

# Compare:
# - Returns by model
# - Sharpe ratios
# - Drawdown periods
# - Prediction accuracy
# - Where each model excels/fails
```

---

#### Week 6: RL Agents

**What Opus Builds:**
- Hierarchical RL agents
- Training environments
- Agent evaluation framework

**What YOU Do:**

**1. Watch Training Progress (TensorBoard)**
```bash
tensorboard --logdir agents/training/runs

# Open browser: http://localhost:6006
# Shows:
# - Reward curves (should trend upward)
# - Episode lengths
# - Q-value estimates
# - Policy entropy (exploration vs exploitation)
# - Strategic/Tactical/Execution agent metrics
```

**2. Review Agent Behavior Notebook**
```python
# notebooks/04_rl_agent_behavior.ipynb

# Load trained agents
from agents.hierarchical.hierarchical_system import HierarchicalTradingSystem
system = HierarchicalTradingSystem.load('agents/saved/hierarchical_v1')

# Simulate specific scenarios
scenarios = [
    'bull_market_2023Q1',
    'bear_market_2022',
    'flash_crash_simulation',
    'low_volatility_ranging'
]

for scenario in scenarios:
    # Run agents through scenario
    result = system.simulate(scenario)
    
    # Visualize decisions
    result.plot_decision_tree()  # Shows strategic ‚Üí tactical ‚Üí execution flow
    result.plot_position_sizes()  # How aggressive/conservative
    result.plot_action_heatmap()  # When did it trade?
    
    print(f"{scenario}: Sharpe = {result.sharpe}, Max DD = {result.max_dd}")
```

**3. Safety Checks**

Create a notebook to verify agents respect constraints:

```python
# notebooks/05_agent_safety_tests.ipynb

# Test 1: Position size limits
test_agent_max_position_size(system, expected_max=0.25)
# ‚úì PASS: Never exceeded 25% position size

# Test 2: Drawdown circuit breaker
test_agent_drawdown_handling(system, drawdown_limit=0.15)
# ‚úì PASS: Stopped trading at 14.8% drawdown

# Test 3: Risk-free scenarios
test_agent_in_obvious_bull(system)
# ‚ö† WARNING: Only captured 60% of bull run (too conservative?)

# Test 4: Loss-limiting
test_agent_in_crash_scenario(system)
# ‚úì PASS: Exited positions quickly, limited loss to 8.2%
```

---

## Paper Trading Phase (Weeks 7-8)

### Your Daily Workflow (30 minutes/day)

**Morning (10 minutes):**

```bash
# 1. Check overnight activity
python monitoring/daily_summary.py

# Outputs to terminal:
# ==================== DAILY SUMMARY ====================
# Date: 2024-12-03
# 
# POSITIONS:
#   BTC/USDT: LONG 0.15 BTC @ $42,150 (entry: $41,800)
#   ETH/USDT: LONG 2.5 ETH @ $2,245 (entry: $2,210)
# 
# P&L:
#   Unrealized: +$127.50 (+1.2%)
#   Realized Today: +$45.20
#   Total Week: +$382.15
# 
# TRADES TODAY:
#   09:35 - Opened BTC/USDT LONG (confidence: 0.73)
#   14:22 - Closed SOL/USDT (profit: +$23.10)
# 
# RISK STATUS: ‚úì All limits healthy
#   Portfolio heat: 35% (max: 50%)
#   Max position: 22% (limit: 25%)
#   Daily loss: -0.2% (limit: -5%)
# 
# ALERTS: None
# =====================================================

# 2. Open monitoring dashboard
python monitoring/dashboard.py
# Opens browser: http://localhost:8501
```

**The Dashboard Shows:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CRYPTO TRADING SYSTEM - PAPER TRADING                      ‚îÇ
‚îÇ  Status: RUNNING | Mode: PAPER | Capital: $10,000          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Total P&L        ‚îÇ ‚îÇ Sharpe Ratio     ‚îÇ ‚îÇ Win Rate         ‚îÇ
‚îÇ +$382.15 (3.8%)  ‚îÇ ‚îÇ 1.65             ‚îÇ ‚îÇ 54.2%            ‚îÇ
‚îÇ ‚ñ≤ This Week      ‚îÇ ‚îÇ ‚ñ≤ vs 1.5 target  ‚îÇ ‚îÇ ‚ñ≤ vs 50% target  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

[EQUITY CURVE CHART - Shows daily balance over time]

[CURRENT POSITIONS]
Symbol    | Side | Size  | Entry    | Current  | P&L    | Confidence
----------|------|-------|----------|----------|--------|------------
BTC/USDT  | LONG | 0.15  | $41,800  | $42,150  | +$52.5 | 0.73
ETH/USDT  | LONG | 2.5   | $2,210   | $2,245   | +$87.5 | 0.68

[RECENT TRADES]
Time  | Symbol    | Side  | Size | Entry    | Exit     | P&L    | Why?
------|-----------|-------|------|----------|----------|--------|------
14:22 | SOL/USDT  | LONG  | 10   | $98.50   | $100.81  | +$23.1 | Target hit
11:15 | AVAX/USDT | SHORT | 8    | $36.20   | $35.95   | +$2.0  | Stop loss
09:35 | BTC/USDT  | LONG  | 0.15 | $41,800  | -        | -      | High confidence signal

[MODEL PREDICTIONS]
Symbol    | Direction | Confidence | Features Contributing
----------|-----------|------------|----------------------
BTC/USDT  | UP        | 0.73       | MVRV bullish, RVS positive, GNN strong
ETH/USDT  | UP        | 0.68       | Following BTC, on-chain accumulation
SOL/USDT  | NEUTRAL   | 0.45       | Mixed signals, stay out

[SYSTEM HEALTH]
‚úì Data pipeline: Healthy (last update: 2 minutes ago)
‚úì Models: Loaded and predicting
‚úì Risk manager: Active
‚ö† Exchange API: 2 rate limit warnings in last hour
‚úì Database: Connected
```

**Evening (20 minutes):**

```bash
# Review decisions in detail
jupyter lab notebooks/06_trade_analysis.ipynb

# This notebook auto-updates with today's trades
# For each trade, you see:
# - What the models predicted
# - Why the position was opened
# - What features were most important
# - Whether risk limits affected sizing
# - The outcome (if closed)

# Example analysis:
# Trade: BTC/USDT LONG opened at 09:35
# 
# Model Predictions:
#   LightGBM: UP (0.72 confidence)
#   LSTM: UP (0.68 confidence)  
#   GNN: UP (0.79 confidence)
#   Ensemble: UP (0.73 confidence)
# 
# Top Features:
#   1. MVRV Z-Score: 1.2 (bullish accumulation zone)
#   2. RVS Sentiment: +0.65 (strong positive with volume)
#   3. Exchange Netflow: -1,200 BTC (leaving exchanges)
#   4. 50-day MA: Price 8% above (momentum)
#   5. GNN Cross-asset: ETH/SOL also showing strength
# 
# RL Agent Decision:
#   Strategic: Allocate 20% to BTC (regime: bull)
#   Tactical: Enter now (timing confidence: high)
#   Execution: Use limit order, 2% above market
# 
# Risk Adjustments:
#   Requested: 0.20 BTC ($8,360)
#   Risk Manager: Reduced to 0.15 BTC due to existing ETH position
#   Final: 0.15 BTC ($6,270, 15% of portfolio)
```

**Weekly Review (Sunday, 1 hour):**

```python
# notebooks/07_weekly_performance_review.ipynb

# Compare to benchmarks
weekly_results.compare_to_benchmarks(
    benchmarks=['BTC_buy_hold', 'ETH_buy_hold', 'SPY']
)

# Output:
# Week of 2024-12-01:
#
# Strategy Performance:
#   Our System: +3.8% (Sharpe: 1.65)
#   BTC Buy&Hold: +5.2% (Sharpe: 0.82)
#   ETH Buy&Hold: +4.1% (Sharpe: 0.78)
#   SPY: +1.1% (Sharpe: 1.2)
#
# Analysis:
#   ‚úì Lower returns than buy-hold BUT much better risk-adjusted
#   ‚úì Avoided the -12% drawdown on Wednesday
#   ‚ö† Missed Thursday's rally (too conservative entry signal)
#
# Recommendations:
#   - Consider lowering entry threshold from 0.70 ‚Üí 0.65
#   - Review Wednesday exit: was it premature?
```

---

## Live Trading Phase (Week 9+)

### Morning Routine (15 minutes)

**1. System Health Check**
```bash
python scripts/health_check.py

# Output:
# ========== SYSTEM HEALTH CHECK ==========
# ‚úì Orchestrator: Running (uptime: 18h 32m)
# ‚úì Database: Connected (last write: 34s ago)
# ‚úì Exchange APIs: All operational
# ‚úì Models: Loaded (last prediction: 1m ago)
# ‚úì Risk Manager: Active
# ‚ö† Disk Space: 78% used (warning at 80%)
# 
# Recent Errors: 0 critical, 2 warnings
# Last Trade: 45 minutes ago (BTC/USDT close)
# =========================================
```

**2. Review Overnight Activity**
```bash
# Automated email/Slack already sent you this at 8am:
```

**üìß Email Subject: Crypto Trading System - Daily Report (Dec 3)**

```
SUMMARY:
Positions: 2 open (BTC, ETH)
P&L Today: +$127.50 (+1.2%)
P&L This Week: +$382.15 (+3.8%)
Sharpe: 1.65 | Max DD: -8.2%

ALERTS: None

TRADES:
‚Ä¢ 09:35 - Opened BTC/USDT LONG ($6,270)
‚Ä¢ 14:22 - Closed SOL/USDT (+$23.10)

SYSTEM STATUS: ‚úì Healthy

View full dashboard: http://yourserver:8501
```

**3. Quick Dashboard Check**
```bash
# Open browser, verify:
# - No unusual behavior
# - Positions make sense
# - Risk levels appropriate
```

### Mid-Day Check (5 minutes)

**Option A: Quick CLI Check**
```bash
python scripts/quick_status.py

# Output:
# Portfolio: $10,382 (+3.8% all-time)
# Positions: 2 (BTC, ETH)
# Risk: 35% heat (healthy)
# Last update: 23 seconds ago
# Status: ‚úì All systems operational
```

**Option B: Mobile Dashboard** (if you build one later)
```
Open app ‚Üí See positions & P&L ‚Üí Done
```

### Evening Review (15 minutes)

**1. Check Predictions vs Outcomes**
```python
# Automated notebook that runs at 5pm:
# notebooks/daily_prediction_accuracy.ipynb

# Shows:
# - What models predicted this morning
# - What actually happened
# - Running accuracy metrics
# - Early warning if accuracy drops
```

**2. Approve or Override Tomorrow**
```bash
# If you want to manually override (rare):
python scripts/set_manual_override.py --action close_all --reason "Fed announcement tomorrow"

# Or just let it run:
# (Do nothing - system runs autonomously)
```

### Weekly Deep Dive (Sunday, 1 hour)

```python
# Run comprehensive analysis
python scripts/weekly_analysis.py --generate-report

# Creates: reports/weekly_analysis_2024_12_03.html

# Review in browser:
# - Performance vs benchmarks
# - Risk metrics
# - Model accuracy trends
# - Feature importance changes
# - Regime detection accuracy
# - Trade analysis (wins/losses)
# - What to adjust next week
```

---

## Jupyter Notebooks Strategy

### Core Notebooks (Built by Opus During Development)

**Phase 1: Data**
- `01_data_validation.ipynb` - Check data quality, distributions
- `01b_feature_engineering_demo.ipynb` - Interactive feature exploration

**Phase 2: Baseline Model**
- `02_lightgbm_training.ipynb` - Train and evaluate baseline
- `02b_feature_importance_analysis.ipynb` - Deep dive on what matters
- `02c_backtest_analysis.ipynb` - Interactive backtest exploration

**Phase 3: On-Chain & Sentiment**
- `03_onchain_signals.ipynb` - Validate MVRV, SOPR, netflows
- `03b_sentiment_analysis.ipynb` - Check RVS scores, bot filtering
- `03c_regime_detection.ipynb` - Verify regime classifier

**Phase 4: Advanced Models**
- `04_model_comparison.ipynb` - LightGBM vs LSTM vs GNN
- `04b_ensemble_analysis.ipynb` - How ensemble combines signals
- `04c_meta_learning_demo.ipynb` - Few-shot adaptation tests

**Phase 5: RL Agents**
- `05_rl_agent_behavior.ipynb` - Understand agent decisions
- `05b_agent_safety_tests.ipynb` - Verify constraints respected
- `05c_hierarchical_coordination.ipynb` - Strategic‚ÜíTactical‚ÜíExecution flow

**Ongoing Analysis**
- `06_trade_analysis.ipynb` - Daily trade review (auto-updates)
- `07_weekly_performance_review.ipynb` - Weekly comparison (auto-runs Sundays)
- `08_model_drift_detection.ipynb` - Check if models are degrading

### How to Use Notebooks

**During Development:**
```bash
# After Opus completes a phase
cd ~/crypto-trading-system
jupyter lab

# Open the relevant notebook
# Run all cells
# Review outputs
# Approve or ask Opus to iterate
```

**During Trading:**
```bash
# Weekly deep dive (Sundays)
jupyter lab

# 1. Run 06_trade_analysis.ipynb - See this week's trades
# 2. Run 07_weekly_performance_review.ipynb - Compare to benchmarks
# 3. Run 08_model_drift_detection.ipynb - Check model health

# Make decisions:
# - Retrain models? (if accuracy dropped >5%)
# - Adjust risk parameters? (if volatility changed)
# - Investigate anomalies? (if unexpected behavior)
```

**Notebooks Are NOT:**
- ‚ùå Required for day-to-day operation (dashboard handles that)
- ‚ùå Production code (they're for analysis only)
- ‚ùå Real-time monitoring (use dashboard for that)

**Notebooks ARE:**
- ‚úÖ Your window into "why" decisions were made
- ‚úÖ Where you validate each phase before approval
- ‚úÖ How you investigate when something seems wrong
- ‚úÖ Deep analysis tools for weekly reviews

---

## Monitoring Dashboard

### Real-Time Monitoring (Streamlit)

**Start the dashboard:**
```bash
python monitoring/dashboard.py

# Opens browser: http://localhost:8501
# Refreshes every 30 seconds automatically
```

**Dashboard Tabs:**

**Tab 1: Overview**
- Total P&L (unrealized + realized)
- Current positions
- Risk metrics
- System health

**Tab 2: Equity Curve**
- Interactive chart showing balance over time
- Drawdown visualization
- Benchmark comparison (BTC, ETH)

**Tab 3: Model Predictions**
- Current predictions for each asset
- Confidence scores
- Feature contributions
- Model agreement/disagreement

**Tab 4: Trade Log**
- All trades (filterable by date, symbol, outcome)
- For each trade:
  - Entry/exit prices
  - P&L
  - Hold time
  - Why it was taken (model signals)
  - Risk adjustments applied

**Tab 5: Risk Monitor**
- Current portfolio heat
- Position sizes (% of portfolio)
- Leverage used
- Correlation matrix
- Distance to circuit breaker limits

**Tab 6: System Health**
- Orchestrator uptime
- Last data update
- API status
- Model load times
- Database size
- Error log (recent)

**Tab 7: Performance Analytics**
- Sharpe ratio over time
- Win rate by asset
- Profit factor
- Average win/loss
- Best/worst trades
- Monthly returns heatmap

---

## Manual Override & Emergency Procedures

### Emergency Stop (Market Crisis)

**Scenario:** Major crash happening, want to exit everything NOW.

```bash
# Method 1: Emergency script
python scripts/emergency_stop.py --reason "Market crash"

# This will:
# - Close all positions (market orders)
# - Stop the orchestrator
# - Send you confirmation alert
# - Log the event
# - Require manual restart later

# Method 2: Dashboard
# Click the big red "EMERGENCY STOP" button on dashboard
```

### Pause Trading (Uncertainty)

**Scenario:** Fed announcement tomorrow, want to sit on the sidelines.

```bash
python scripts/pause_trading.py --duration 24h --reason "Fed announcement"

# This will:
# - Close existing positions gracefully (limit orders)
# - Prevent new positions
# - Resume automatically after 24h
# - Log the pause
```

### Manual Trade (Override)

**Scenario:** You see something the model doesn't, want to take a position.

```bash
# Method 1: CLI
python scripts/manual_trade.py \
  --symbol BTC/USDT \
  --side LONG \
  --amount 0.1 \
  --reason "Breaking news: major adoption"

# Method 2: Dashboard
# Navigate to "Manual Trade" tab
# Fill in form
# Submit (with risk manager still enforcing limits)
```

### Force Model Retraining

**Scenario:** Model accuracy dropped below 50%, needs retraining now.

```bash
python scripts/force_retrain.py --model all --reason "Accuracy degraded"

# This will:
# - Fetch latest data
# - Retrain LightGBM, LSTM, GNN
# - Backtest on recent data
# - Load new models if they pass validation
# - Alert you when complete (~30-60 minutes)
```

### Adjust Risk Parameters

**Scenario:** Volatility spiked, want to reduce position sizes temporarily.

```bash
# Method 1: CLI
python scripts/update_risk.py --max-position 0.15  # Reduce from 25% to 15%

# Method 2: Edit config and restart
nano config/risk.yaml
# Change max_position_size: 0.15
python scripts/restart_orchestrator.py

# Method 3: Dashboard
# Settings tab ‚Üí Risk Parameters ‚Üí Update ‚Üí Apply
```

---

## Daily Maintenance Workflow

### Minimal Maintenance (10-15 min/day)

**Morning (5 min):**
```bash
# Check email summary
# Open dashboard
# Verify no alerts
# That's it - system runs itself
```

**Evening (5 min):**
```bash
# Check dashboard
# Review today's trades (if any)
# Done
```

**Sunday (1 hour):**
```bash
# Deep analysis in Jupyter
# Compare to benchmarks
# Check model health
# Adjust if needed
```

### Weekly Maintenance Tasks

**Every Sunday (60-90 minutes):**

1. **Performance Review** (20 min)
   ```bash
   jupyter lab notebooks/07_weekly_performance_review.ipynb
   # Compare to benchmarks
   # Analyze wins/losses
   ```

2. **Model Health Check** (20 min)
   ```bash
   jupyter lab notebooks/08_model_drift_detection.ipynb
   # Check accuracy trends
   # Feature importance stability
   # Prediction confidence
   ```

3. **Risk Parameter Review** (10 min)
   ```bash
   # Check if volatility changed significantly
   python scripts/volatility_analysis.py
   
   # Adjust position sizes if needed
   # (e.g., if BTC vol doubled, reduce max position)
   ```

4. **System Updates** (10 min)
   ```bash
   # Pull latest code (if Opus pushed improvements)
   git pull
   
   # Update dependencies if needed
   pip install -r requirements.txt --upgrade
   
   # Restart orchestrator
   python scripts/restart_orchestrator.py
   ```

5. **Data Quality Check** (10 min)
   ```bash
   python scripts/data_quality_report.py
   # Check for:
   # - Missing data points
   # - Unusual spikes
   # - API failures
   # - Database size
   ```

### Monthly Maintenance Tasks

**First Sunday of Month (2-3 hours):**

1. **Full Model Retraining** (automated, just monitor)
   ```bash
   python scripts/monthly_retrain.py
   # Retrains all models on latest data
   # Runs comprehensive backtests
   # Loads new models if they improve performance
   ```

2. **Strategy Performance Analysis**
   ```python
   # notebooks/monthly_strategy_review.ipynb
   # Deep dive:
   # - What worked this month?
   # - What didn't?
   # - Any regime changes?
   # - Should we adjust strategy?
   ```

3. **Cost Analysis**
   ```bash
   python scripts/cost_analysis.py
   # Shows:
   # - Total trading fees paid
   # - Data provider costs
   # - Cloud costs (if applicable)
   # - Net returns after all costs
   ```

4. **Database Maintenance**
   ```bash
   python scripts/db_maintenance.py
   # Compress old data
   # Archive ancient records
   # Update TimescaleDB retention policies
   ```

---

## What If Things Go Wrong?

### Scenario 1: System Crashes

**Symptoms:**
- Dashboard unreachable
- No email reports
- orchestrator.py not running

**Fix:**
```bash
# Check what happened
tail -100 logs/error.log

# Restart
python orchestrator.py --mode live --capital 10000

# Check it's working
python scripts/health_check.py
```

### Scenario 2: Losses Mounting

**Symptoms:**
- Multiple losing trades
- Drawdown approaching 10%
- Win rate dropped to 35%

**Fix:**
```bash
# Immediate: Pause trading
python scripts/pause_trading.py --duration 48h --reason "Investigating losses"

# Analyze in Jupyter
jupyter lab notebooks/06_trade_analysis.ipynb
# Look for:
# - Are we in a regime change? (model not adapted)
# - Is data quality degraded? (API issues)
# - Are models overfitting? (too confident on weak signals)

# Options:
# 1. Wait it out (if drawdown < 10% and seems temporary)
# 2. Retrain models (if accuracy clearly degraded)
# 3. Reduce position sizes (if volatility spiked)
# 4. Stop trading (if can't identify cause)
```

### Scenario 3: Model Accuracy Degrading

**Symptoms:**
- Weekly accuracy check shows downtrend
- Predictions consistently wrong
- Sharpe ratio declining

**Fix:**
```bash
# Retrain with fresh data
python scripts/force_retrain.py --model all

# If that doesn't help:
jupyter lab notebooks/08_model_drift_detection.ipynb
# Investigate:
# - Feature distributions shifted? (market regime change)
# - New correlations? (GNN needs updating)
# - Data quality issues? (API problems)

# May need to:
# - Add new features (capture new patterns)
# - Adjust hyperparameters
# - Expand training data
# - Consider meta-learning adaptation
```

---

## Summary: Your Interaction Model

### You DON'T Need To:
- ‚ùå Write any code (Opus does that)
- ‚ùå Monitor tick-by-tick (system handles it)
- ‚ùå Make every trading decision (system is autonomous)
- ‚ùå Understand all the ML details (notebooks explain)
- ‚ùå Be a git expert (basic commands suffice)

### You DO Need To:
- ‚úÖ Review & approve each development phase
- ‚úÖ Validate models before deploying (run notebooks)
- ‚úÖ Check dashboard daily (5 minutes)
- ‚úÖ Do weekly performance reviews (Sundays, 1 hour)
- ‚úÖ Retrain models monthly
- ‚úÖ Investigate when something seems wrong
- ‚úÖ Make high-level decisions (risk tolerance, capital allocation)
- ‚úÖ Be the final authority on manual overrides

### Time Commitment:
- **Development (Weeks 1-6):** 1-2 hours/day reviewing Opus's work
- **Paper Trading (Weeks 7-8):** 30-60 min/day monitoring
- **Live Trading:** 15 min/day + 1 hour/week deep dive
- **Monthly:** 2-3 hours for full review and retraining

### Mental Model:

Think of yourself as the **Portfolio Manager** and Opus as your **Quantitative Developer Team**.

- You set strategy and risk tolerance
- You validate that implementations are correct
- You monitor performance and make adjustments
- You have veto power on everything
- But you don't write the code yourself

The system is designed to be **transparent** (you can always see why decisions were made) but **autonomous** (you don't have to micromanage).

---

**Next Steps:**
1. Hand this file + others to Opus
2. Ask Opus to add notebook generation to each phase
3. Start Phase 0 with clear visibility requirements

